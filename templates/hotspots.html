<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crash Hotspots</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hotspots.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
    <header>
        <h1>Crash Hotspots</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('home') }}">Home</a></li>
                <li><a href="{{ url_for('hotspots') }}">Crash Hotspot Analysis</a></li>
                <li><a href="{{ url_for('prediction') }}">Data Insights</a></li>
                <li><a href="#about">About Us</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="hotspots">
            <form class="search-form">
                <div class="input-group">
                    <input type="text" id="locationSearch" name="location" placeholder="e.g., Ballarat" aria-label="Location search">
                    <button type="button" id="searchButton" class="btn-primary">Filter</button>
                </div>
                <small class="tooltip">Type a city or state to filter crash hotspots.</small>
            </form>
            
            <div id="loadingSpinner" style="display: none;">Loading Speed Zones...</div>

            <!-- The map div -->
            <div id="map"></div>

            <!-- Professional Safety Tips & Features -->
            <div class="map-info">
                <h2>Professional Safety Tips & Unique Features</h2>
                <div class="feature-item" id="speed-monitoring">
                    <div class="icon-wrapper">üöó</div>
                    <h3>Speed Monitoring</h3>
                    <p>Stay under the speed limit at all times to avoid accidents and hefty fines. Use built-in GPS to monitor real-time speed.</p>
                </div>
                
                    <div class="feature-item">
                        <div class="icon-wrapper">üîí</div>
                        <h3>Seatbelt Reminder</h3>
                        <p>Automatic seatbelt reminders ensure all passengers are buckled up securely before starting your trip. Buckle up for safety!</p>
                    </div>
                    <div class="feature-item">
                        <div class="icon-wrapper">üì±</div>
                        <h3>Distraction-Free Driving</h3>
                        <p>Use our "Do Not Disturb" feature to block notifications while driving. Stay focused, avoid distractions, and prevent crashes.</p>
                    </div>
                    <div class="feature-item">
                        <div class="icon-wrapper">üåßÔ∏è</div>
                        <h3>Weather Alerts</h3>
                        <p>Get real-time weather alerts to adjust your driving speed and visibility in fog, rain, or snow. Be aware and be prepared.</p>
                    </div>
                    <div class="feature-item">
                        <div class="icon-wrapper">üïí</div>
                        <h3>Time of Day Awareness</h3>
                        <p>Night driving? Take extra caution. Reduced visibility can increase risk. Our feature reminds you to take a break every 2 hours.</p>
                    </div>
                    <div class="feature-item">
                        <div class="icon-wrapper">üõë</div>
                        <h3>Emergency Braking Assistance</h3>
                        <p>In emergencies, automatic braking engages to prevent a collision. Stay safe with advanced braking technologies.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Crash Hotspots. All rights reserved.</p>
    </footer>

    <!-- Leaflet and Heatmap libraries -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.heat/0.2.0/leaflet-heat.js"></script>

    <!-- Script for loading the CSV file -->
    <script>
        var csvUrl = "{{ url_for('static', filename='data/NODE.csv') }}";  // URL to the CSV file
    </script>

    <!-- Custom script for the heatmap -->
    <script src="{{ url_for('static', filename='js/hotspot.js') }}"></script> <!-- Updated to use Flask's url_for for consistent paths -->
    <script>
        var geojsonUrl = "{{ url_for('static', filename='data/Speed_Zones_August_2024.geojson') }}";  // Flask url_for inside the HTML
    </script>
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#hotspots">Crash Hotspot Analysis</a></li>
                    <li><a href="#preventive">Preventive Measures</a></li>
                    <li><a href="#prediction">Accident Prediction</a></li>
                    <li><a href="#about">About Us</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>Email: <a href="mailto:info@crashdatavictoria.com">info@crashdatavictoria.com</a></p>
                <p>Phone: +61 3 1234 5678</p>
                <div class="social-media">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>

            <div class="footer-section">
                <h3>Subscribe to Our Newsletter</h3>
                <form action="#" method="POST" class="newsletter-form">
                    <input type="email" name="email" placeholder="Enter your email" required>
                    <button type="submit" class="btn-secondary">Subscribe</button>
                </form>
            </div>

            <div class="footer-section">
                <h3>Legal</h3>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Disclaimer</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2024 Open Road Crash Data Victoria. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
